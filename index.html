<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Alolo FrÃ¼chte-Galerie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡: preload Ù„Ø¨Ø¹Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ù‡Ù…Ø© -->
    <link rel="preload" as="image" href="images/apfel.jpg">
    <link rel="preload" as="image" href="images/banane.jpg">
    <link rel="preload" as="image" href="images/orange.jpg">
    <link rel="preload" as="image" href="images/erdbeere.jpg">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.webmanifest">

    <style>
        :root {
            --blue: #0b2340;
            --yellow: #f5c33b;
            --yellow-soft: #ffdf80;
            --text-light: #fdfdfd;
            --shadow-strong: 0 12px 25px rgba(0, 0, 0, 0.35);
            --shadow-soft: 0 8px 16px rgba(0, 0, 0, 0.22);
            --radius-card: 18px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: linear-gradient(135deg, var(--blue) 50%, var(--yellow) 50%);
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s ease, color 0.3s ease;
        }

        header {
            text-align: center;
            padding: 1.8rem 1rem 0.5rem;
            position: relative;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.25rem 0.8rem;
            border-radius: 999px;
            border: 1px solid var(--yellow-soft);
            font-size: 0.8rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            margin-bottom: 0.7rem;
            background-color: rgba(0, 0, 0, 0.25);
        }

        .badge-icon {
            font-size: 1rem;
        }

        h1 {
            font-size: clamp(2rem, 3vw, 2.6rem);
            margin-bottom: 0.3rem;
        }

        .subtitle {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        /* Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ */
        .theme-toggle {
            position: absolute;
            right: 1.2rem;
            top: 1.2rem;
            padding: 0.3rem 0.8rem;
            border-radius: 999px;
            border: 1px solid rgba(245, 195, 59, 0.6);
            background: rgba(0, 0, 0, 0.4);
            color: var(--text-light);
            font-size: 0.8rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            backdrop-filter: blur(6px);
            transition: background 0.2s ease, transform 0.1s ease;
        }

        .theme-toggle span.icon {
            font-size: 1rem;
        }

        .theme-toggle:hover {
            background: rgba(0, 0, 0, 0.65);
            transform: translateY(-1px);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© (XP + Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª) */
        .top-status {
            max-width: 1200px;
            margin: 0.9rem auto 0;
            padding: 0 1rem 0.7rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
            justify-content: center;
            align-items: center;
        }

        .xp-pill {
            padding: 0.25rem 0.8rem;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            background: rgba(0, 0, 0, 0.35);
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .xp-pill-icon {
            font-size: 1rem;
        }

        .cert-badges {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            flex-wrap: wrap;
        }

        .cert-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .cert-icons-row {
            display: inline-flex;
            gap: 0.2rem;
            flex-wrap: wrap;
        }

        .cert-icon {
            width: 1.4rem;
            height: 1.4rem;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .cert-icon.highlight {
            background: linear-gradient(135deg, var(--yellow-soft), #f97316);
            color: #111827;
        }

        /* ØªÙ†Ù‚Ù‘Ù„ Ø§Ù„ØµÙØ­Ø§Øª Ù…Ø«Ù„ ØªØ¨ÙˆÙŠØ¨Ø§Øª Duolingo */
        .main-nav {
            max-width: 1200px;
            margin: 0.4rem auto 0;
            padding: 0 1rem 0.8rem;
            display: flex;
            justify-content: center;
            gap: 0.4rem;
        }

        .nav-tab {
            flex: 0 0 auto;
            min-width: 110px;
            padding: 0.45rem 0.9rem;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.45);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-size: 0.85rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            transition: background 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
        }

        .nav-tab-icon {
            font-size: 1rem;
        }

        .nav-tab:hover {
            background: rgba(0, 0, 0, 0.6);
            transform: translateY(-1px);
            border-color: var(--yellow-soft);
        }

        .nav-tab.active {
            background: var(--yellow-soft);
            color: #111827;
            border-color: var(--yellow-soft);
        }

        main {
            width: 100%;
            max-width: 1200px;
            margin: 0.6rem auto 3rem;
            padding: 0 1rem 2rem;
        }

        .page {
            display: none;
            animation: fadeIn 0.25s ease;
        }

        .page.page-active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(4px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===============================
           Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ…: Ø¨Ø­Ø« + ÙÙ„Ø§ØªØ± + Ø·Ø¨Ø§Ø¹Ø© + ØªÙ‚Ø¯Ù‘Ù…
           =============================== */
        .controls {
            margin-bottom: 1.5rem;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 16px;
            padding: 0.9rem 1rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
        }

        .controls-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
            align-items: center;
            margin-bottom: 0.6rem;
        }

        .search-input {
            flex: 1 1 180px;
            min-width: 0;
        }

        .search-input input {
            width: 100%;
            padding: 0.45rem 0.7rem;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.28);
            background: rgba(0, 0, 0, 0.35);
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .search-input input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .control-button {
            padding: 0.4rem 0.9rem;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.35);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-size: 0.8rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            transition: background 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
            white-space: nowrap;
        }

        .control-button.small {
            padding: 0.25rem 0.6rem;
            font-size: 0.75rem;
        }

        .control-button:hover {
            background: rgba(0, 0, 0, 0.6);
            transform: translateY(-1px);
            border-color: var(--yellow-soft);
        }

        .control-button.active {
            background: var(--yellow-soft);
            color: #111827;
            border-color: var(--yellow-soft);
        }

        .filters {
            flex-wrap: wrap;
        }

        .filters-label {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-right: 0.4rem;
        }

        .progress-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
            align-items: center;
        }

        .progress-label {
            font-size: 0.8rem;
        }

        .progress-track {
            flex: 1 1 180px;
            height: 0.55rem;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            border-radius: 999px;
            background: linear-gradient(90deg, #34d399, #22c55e);
            transition: width 0.25s ease;
        }

        .quiz-info {
            font-size: 0.8rem;
            opacity: 0.85;
        }

        /* ===============================
           ØµÙØ­Ø© Schnell-Quiz (A1)
           =============================== */
        .quiz-section {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 16px;
            padding: 0.9rem 1rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.7rem;
        }

        .quiz-title {
            font-size: 0.95rem;
            font-weight: 600;
        }

        .quiz-subtitle {
            font-size: 0.8rem;
            opacity: 0.85;
        }

        .quiz-meta {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .quiz-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
            gap: 0.7rem;
        }

        .quiz-card {
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            background: rgba(7, 17, 32, 0.96);
            padding: 0.6rem 0.7rem;
            display: flex;
            gap: 0.55rem;
        }

        .quiz-card-img {
            flex: 0 0 80px;
            aspect-ratio: 1 / 1;
            overflow: hidden;
            border-radius: 10px;
        }

        .quiz-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .quiz-card-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }

        .quiz-ar {
            font-size: 0.9rem;
            color: var(--yellow-soft);
        }

        .quiz-de {
            font-size: 0.9rem;
            display: none;
        }

        .quiz-status {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 0.1rem;
        }

        .quiz-actions {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
            margin-top: 0.2rem;
        }

        .quiz-card.known {
            border-color: #22c55e;
        }

        .quiz-card.unknown {
            border-color: #ef4444;
        }

        /* ===============================
           Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (Card + Flip)
           =============================== */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
            gap: 1.1rem;
        }

        .card {
            background: transparent;
            border-radius: var(--radius-card);
            perspective: 1000px;
        }

        .card-inner {
            position: relative;
            border-radius: var(--radius-card);
            overflow: hidden;
            border: 1px solid rgba(245, 195, 59, 0.35);
            box-shadow: var(--shadow-strong);
            display: flex;
            flex-direction: column;
            transition:
                transform 0.5s ease,
                box-shadow 0.2s ease,
                border-color 0.2s ease,
                background 0.3s ease;
            transform-style: preserve-3d;
            background: rgba(11, 35, 64, 0.95);
        }

        .card:hover .card-inner {
            box-shadow: 0 18px 35px rgba(0, 0, 0, 0.5);
            border-color: var(--yellow-soft);
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-face {
            position: relative;
            inset: 0;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
        }

        .card-front {
            z-index: 2;
        }

        .card-back {
            position: absolute;
            inset: 0;
            transform: rotateY(180deg);
            background: rgba(7, 17, 32, 0.98);
            padding-bottom: 0.9rem;
        }

        .card-front::before,
        .card-back::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top left,
                    rgba(245, 195, 59, 0.18),
                    transparent 55%);
            pointer-events: none;
        }

        .card:hover .de-name {
            transform: translateY(-1px);
        }

        .card:hover .ar-name {
            transform: translateY(1px);
        }

        .image-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            cursor: zoom-in;
        }

        .image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transform: scale(1.02);
            transition: transform 0.25s ease;
        }

        .card:hover .image-wrapper img {
            transform: scale(1.06);
        }

        .card-body {
            padding: 0.85rem 1rem 0.9rem;
            position: relative;
            z-index: 1;
        }

        .de-line {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.25rem;
            gap: 0.4rem;
        }

        .de-main {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .article {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--yellow-soft);
            padding: 0.1rem 0.6rem;
            border-radius: 999px;
            border: 1px solid rgba(245, 195, 59, 0.55);
            background-color: rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
            position: relative;
            cursor: help;
        }

        .de-name {
            font-weight: 600;
            font-size: 1rem;
            transition: transform 0.15s ease;
        }

        .speak-btn {
            border: none;
            background: rgba(0, 0, 0, 0.3);
            color: var(--yellow-soft);
            border-radius: 999px;
            padding: 0.1rem 0.45rem;
            font-size: 0.9rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            transition: background 0.15s ease, transform 0.1s ease, opacity 0.15s ease;
        }

        .speak-btn:hover {
            background: rgba(0, 0, 0, 0.55);
            transform: translateY(-1px);
        }

        .speak-btn[disabled] {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .level-pill {
            font-size: 0.7rem;
            padding: 0.1rem 0.5rem;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            opacity: 0.85;
            white-space: nowrap;
        }

        .ar-name {
            font-size: 0.9rem;
            margin-top: 0.25rem;
            color: var(--yellow-soft);
            text-align: left;
            transition: transform 0.15s ease;
        }

        .code-path {
            margin-top: 0.35rem;
            font-size: 0.7rem;
            opacity: 0.9;
            font-family: "Fira Code", "Cascadia Code", monospace;
            background: rgba(0, 0, 0, 0.4);
            padding: 0.3rem 0.45rem;
            border-radius: 999px;
            display: inline-block;
        }

        .card-footer-row {
            margin-top: 0.45rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.35rem;
            flex-wrap: wrap;
        }

        .learn-toggle {
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.25);
            background: rgba(0, 0, 0, 0.25);
            padding: 0.18rem 0.6rem;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            color: var(--text-light);
            transition: background 0.15s ease, border-color 0.15s ease, transform 0.1s ease;
        }

        .learn-toggle:hover {
            background: rgba(0, 0, 0, 0.6);
            transform: translateY(-1px);
        }

        .learn-toggle .learn-icon {
            font-size: 0.9rem;
        }

        .flip-toggle {
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: transparent;
            padding: 0.18rem 0.55rem;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            cursor: pointer;
            color: var(--text-light);
        }

        .flip-toggle:hover {
            background: rgba(0, 0, 0, 0.35);
        }

        .card-learned .card-inner {
            border-color: #34d399;
            box-shadow: 0 14px 30px rgba(16, 185, 129, 0.38);
        }

        .card-learned .learn-icon {
            color: #4ade80;
        }

        .card-learned .learn-label {
            opacity: 0.9;
        }

        /* Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø®Ù„ÙÙŠ: Ù…Ø«Ø§Ù„ Ø¬Ù…Ù„Ø© */
        .card-back-content {
            padding: 0.9rem 1rem 1.1rem;
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }

        .example-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            opacity: 0.75;
            margin-bottom: 0.3rem;
        }

        .example-de {
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .example-ar {
            font-size: 0.9rem;
            color: var(--yellow-soft);
        }

        /* ===============================
           ØµÙØ­Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª (Zertifikate)
           =============================== */
        .cert-page-header {
            margin-bottom: 0.8rem;
        }

        .cert-page-header h2 {
            font-size: 1.1rem;
            margin-bottom: 0.2rem;
        }

        .cert-page-header p {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .cert-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 0.9rem;
        }

        .cert-card {
            position: relative;
            border-radius: 18px;
            padding: 0.9rem 1rem 0.9rem;
            background: linear-gradient(135deg, rgba(11, 35, 64, 0.96), rgba(245, 195, 59, 0.2));
            border: 1px solid rgba(245, 195, 59, 0.6);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
        }

        .cert-ribbon {
            position: absolute;
            top: 0.4rem;
            right: 0.6rem;
            padding: 0.15rem 0.7rem;
            border-radius: 999px;
            background: var(--yellow-soft);
            color: #111827;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .cert-title {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.15rem;
        }

        .cert-meta {
            font-size: 0.75rem;
            opacity: 0.9;
            margin-bottom: 0.4rem;
        }

        .cert-text-de {
            font-size: 0.8rem;
            margin-bottom: 0.25rem;
        }

        .cert-text-ar {
            font-size: 0.85rem;
            color: var(--yellow-soft);
        }

        footer {
            text-align: center;
            font-size: 0.8rem;
            padding: 0.8rem 1rem 1.2rem;
            color: rgba(255, 255, 255, 0.78);
            transition: color 0.3s ease;
        }

        .sr-only {
            position: absolute !important;
            height: 1px; width: 1px;
            overflow: hidden;
            clip: rect(1px, 1px, 1px, 1px);
            white-space: nowrap;
        }

        /* ===============================
           ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ (Light Mode)
           =============================== */
        body[data-theme="light"] {
            background: linear-gradient(135deg, #fef7e3 50%, #e2ecff 50%);
            color: #102a43;
        }

        body[data-theme="light"] .badge {
            background-color: rgba(255, 255, 255, 0.7);
            color: #102a43;
            border-color: #f5c33b;
        }

        body[data-theme="light"] .theme-toggle {
            background: rgba(255, 255, 255, 0.9);
            color: #102a43;
            border-color: rgba(16, 42, 67, 0.25);
        }

        body[data-theme="light"] .theme-toggle:hover {
            background: rgba(255, 255, 255, 1);
        }

        body[data-theme="light"] .controls,
        body[data-theme="light"] .quiz-section {
            background: rgba(255, 255, 255, 0.82);
            border-color: rgba(15, 23, 42, 0.08);
        }

        body[data-theme="light"] .search-input input {
            background: rgba(255, 255, 255, 0.9);
            color: #111827;
            border-color: rgba(15, 23, 42, 0.12);
        }

        body[data-theme="light"] .search-input input::placeholder {
            color: rgba(75, 85, 99, 0.85);
        }

        body[data-theme="light"] .control-button {
            background: rgba(255, 255, 255, 0.9);
            color: #111827;
            border-color: rgba(15, 23, 42, 0.12);
        }

        body[data-theme="light"] .control-button:hover {
            background: rgba(255, 255, 255, 1);
        }

        body[data-theme="light"] .control-button.active {
            background: #111827;
            color: #f9fafb;
            border-color: #111827;
        }

        body[data-theme="light"] .card-inner {
            background: rgba(255, 255, 255, 0.96);
            border-color: rgba(16, 42, 67, 0.16);
            box-shadow: 0 10px 20px rgba(15, 23, 42, 0.12);
        }

        body[data-theme="light"] .card-back {
            background: rgba(241, 245, 249, 0.98);
        }

        body[data-theme="light"] .article {
            background-color: rgba(255, 248, 230, 0.9);
            border-color: rgba(245, 195, 59, 0.7);
            color: #b7791f;
        }

        body[data-theme="light"] .ar-name {
            color: #b7791f;
        }

        body[data-theme="light"] .code-path {
            background: rgba(15, 23, 42, 0.04);
            color: #4b5563;
        }

        body[data-theme="light"] footer {
            color: #1f2933;
        }

        body[data-theme="light"] .speak-btn {
            background: rgba(15, 23, 42, 0.06);
            color: #b7791f;
        }

        body[data-theme="light"] .speak-btn:hover {
            background: rgba(15, 23, 42, 0.12);
        }

        body[data-theme="light"] .learn-toggle {
            background: rgba(15, 23, 42, 0.03);
            color: #111827;
        }

        body[data-theme="light"] .cert-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(254, 243, 199, 0.95));
            color: #1f2933;
        }

        body[data-theme="light"] .cert-text-ar {
            color: #b7791f;
        }

        /* ===============================
           Modal Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±
           =============================== */
        .image-modal {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
            z-index: 999;
        }

        .image-modal.open {
            opacity: 1;
            pointer-events: auto;
        }

        .image-modal-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .image-modal-dialog {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            width: min(900px, 90vw);
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
            z-index: 1;
        }

        .image-modal-frame {
            background: #000;
            border-radius: 18px;
            overflow: hidden;
            aspect-ratio: 16 / 9;
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.65);
        }

        .image-modal-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .image-modal-caption {
            font-size: 0.9rem;
            color: #f9fafb;
            text-align: center;
        }

        .image-modal-close {
            position: absolute;
            top: -0.6rem;
            right: -0.6rem;
            width: 2.2rem;
            height: 2.2rem;
            border-radius: 999px;
            border: none;
            cursor: button;
            cursor: pointer;
            background: #f5c33b;
            color: #111827;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .image-modal-close:hover {
            transform: translateY(-1px);
        }

        /* ===============================
           ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
           =============================== */
        @media (max-width: 700px) {
            header {
                padding-top: 1.4rem;
            }

            .theme-toggle {
                top: 0.8rem;
                right: 0.8rem;
            }

            .controls,
            .quiz-section {
                padding: 0.7rem 0.7rem 0.8rem;
            }

            .card-body {
                padding: 0.7rem 0.75rem 0.8rem;
            }

            .card-back-content {
                padding: 0.7rem 0.75rem 0.9rem;
            }

            .gallery {
                gap: 0.9rem;
            }

            .card-inner {
                box-shadow: var(--shadow-soft);
            }

            .code-path {
                display: none;
            }

            .top-status {
                padding-bottom: 0.4rem;
            }
        }

        /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¸Ù„Ø§Ù„ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙŠ ØªÙØ¶Ù‘Ù„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© */
        @media (prefers-reduced-motion: reduce) {
            .card-inner,
            .image-modal-frame {
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
                transition: none;
            }

            .card:hover .image-wrapper img {
                transform: none;
            }

            .page {
                animation: none;
            }
        }

        /* ===============================
           ÙˆØ¶Ø¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (Print View â€“ A4)
           =============================== */
        @media print {
            @page {
                size: A4;
                margin: 10mm;
            }

            body {
                background: #ffffff !important;
                color: #000000 !important;
            }

            header {
                padding: 4mm 0 2mm;
            }

            .theme-toggle,
            .image-modal,
            .nav-tab,
            .control-button,
            .speak-btn,
            .flip-toggle {
                display: none !important;
            }

            .top-status {
                padding: 0 0 2mm;
                margin-bottom: 2mm;
                justify-content: flex-start;
            }

            main {
                margin: 0;
                padding: 0;
                max-width: 100%;
            }

            .page {
                display: block !important;
                margin-top: 2mm;
            }

            /* Ù†Ø·Ø¨Ø¹ ØµÙØ­Ø© Ø§Ù„ØªØ¹Ù„Ù… + Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª ÙÙ‚Ø· */
            #page-quiz {
                display: none !important;
            }

            .gallery {
                grid-template-columns: repeat(4, 1fr);
                gap: 2mm;
                padding: 0;
            }

            .card-inner {
                box-shadow: none !important;
                border-radius: 4px;
                border: 0.3pt solid #000000;
                background: #ffffff !important;
            }

            .card-body {
                padding: 2mm 2mm 3mm;
            }

            .image-wrapper {
                aspect-ratio: 4 / 3;
            }

            .article,
            .de-name,
            .ar-name {
                font-size: 8pt;
            }

            .level-pill,
            .learn-toggle {
                display: none !important;
            }

            .card-back {
                display: none !important;
            }

            .cert-list {
                grid-template-columns: repeat(2, 1fr);
                gap: 3mm;
            }

            .cert-card {
                box-shadow: none !important;
                border-radius: 4px;
                border: 0.3pt solid #000000;
                background: #ffffff !important;
                color: #000 !important;
                padding: 3mm 3mm 3mm;
            }

            .cert-text-ar {
                color: #000000 !important;
            }

            footer {
                margin-top: 3mm;
                color: #000000;
                font-size: 7pt;
            }
        }
    </style>
</head>
<body data-theme="dark">
<header>
    <button class="theme-toggle" type="button" aria-label="Farbschema wechseln">
        <span class="icon" aria-hidden="true">ğŸŒ™</span>
        <span class="label">Nachtmodus</span>
    </button>

    <div class="badge">
        <span class="badge-icon">ğŸ‹</span>
        <span>Alolo Â· Deutsch &amp; Arabisch Â· FrÃ¼chte</span>
    </div>
    <h1>Interaktiver FrÃ¼chte-Katalog</h1>
    <p class="subtitle">
        Galerie
        <span lang="ar" dir="rtl">
            Ø¨ØµØ±ÙŠÙ‘Ø© Ù„ØªØ¹Ù„Ù‘Ù… Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø¨Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¶Ù…Ù† Ù‡ÙˆÙŠØ© Ø¨ØµØ±ÙŠØ© ÙˆØ§Ø­Ø¯Ø©.
        </span>
    </p>
</header>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø«Ù„ Duolingo (XP + Zertifikate) -->
<div class="top-status">
    <div class="xp-pill">
        <span class="xp-pill-icon">â­</span>
        <span><span id="xpValue">0</span> XP</span>
    </div>
    <div class="cert-badges">
        <span class="cert-label">Zertifikate:</span>
        <div id="certIcons" class="cert-icons-row"></div>
    </div>
</div>

<!-- ØªÙ†Ù‚Ù‘Ù„ Ø§Ù„ØµÙØ­Ø§Øª -->
<nav class="main-nav" aria-label="Hauptnavigation">
    <button class="nav-tab active" data-target="page-learn" type="button">
        <span class="nav-tab-icon">ğŸ“š</span>
        <span>Lernen</span>
    </button>
    <button class="nav-tab" data-target="page-quiz" type="button">
        <span class="nav-tab-icon">âš¡</span>
        <span>Schnell-Quiz</span>
    </button>
    <button class="nav-tab" data-target="page-certificates" type="button">
        <span class="nav-tab-icon">ğŸ“œ</span>
        <span>Zertifikate</span>
    </button>
</nav>

<main role="main">
    <!-- ØµÙØ­Ø© 1: Ø§Ù„ØªØ¹Ù„Ù‘Ù… (Ø§Ù„ÙƒØ±ÙˆØª) -->
    <section id="page-learn" class="page page-active" aria-label="Lern-Katalog">
        <section class="controls" aria-label="Filter und Lernfortschritt">
            <div class="controls-row">
                <div class="search-input">
                    <input id="searchInput" type="search"
                           placeholder="Suche nach Obst (Deutsch oder Ø¹Ø±Ø¨ÙŠ)...">
                </div>
                <button id="lightningQuizBtn" class="control-button" type="button">
                    âš¡ Schnell-Quiz (A1)
                </button>
                <button id="printBtn" class="control-button" type="button">
                    ğŸ–¨ï¸ Seite als PDF drucken
                </button>
            </div>

            <div class="controls-row filters">
                <span class="filters-label">Filter:</span>
                <button class="control-button filter-btn active" data-filter="all" type="button">
                    Alle
                </button>
                <button class="control-button filter-btn" data-filter="A1" type="button">
                    Niveau A1
                </button>
                <button class="control-button filter-btn" data-filter="A2" type="button">
                    Niveau A2
                </button>
                <button class="control-button filter-btn" data-filter="Zitrusfrucht" type="button">
                    ZitrusfrÃ¼chte
                </button>
                <button class="control-button filter-btn" data-filter="Beere" type="button">
                    Beeren
                </button>
                <button class="control-button filter-btn" data-filter="Exotisch" type="button">
                    Exotisch
                </button>
            </div>

            <div class="controls-row progress-row">
                <div class="progress-label">
                    Lernfortschritt:
                    <span id="progressText">0 / 0</span>
                </div>
                <div class="progress-track">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="quiz-info" id="quizInfo"></div>
            </div>
        </section>

        <section class="gallery" aria-label="Galerie der FrÃ¼chte">
            <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙˆÙ„Ù‘ÙØ¯ Ù‡Ù†Ø§ Ø¨Ø§Ù„Ù€ JavaScript -->
        </section>
    </section>

    <!-- ØµÙØ­Ø© 2: Schnell-Quiz (A1) -->
    <section id="page-quiz" class="page" aria-label="Schnell-Quiz A1">
        <section class="quiz-section">
            <div class="quiz-header">
                <div>
                    <div class="quiz-title">âš¡ Schnell-Quiz (A1)</div>
                    <div class="quiz-subtitle">
                        Schau dir das Bild und das arabische Wort an, dann klicke auf â€LÃ¶sung zeigenâ€œ
                        und markiere, ob du es wusstest.
                    </div>
                    <div class="quiz-meta" id="quizMeta"></div>
                </div>
                <button id="quizCloseBtn" class="control-button small" type="button">
                    â¬… ZurÃ¼ck zum Lernen
                </button>
            </div>
            <div class="quiz-list" id="quizList">
                <!-- Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ÙƒÙˆÙŠØ² ØªÙˆÙ„Ù‘ÙØ¯ Ù‡Ù†Ø§ -->
            </div>
        </section>
    </section>

    <!-- ØµÙØ­Ø© 3: Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª -->
    <section id="page-certificates" class="page" aria-label="Zertifikate">
        <div class="cert-page-header">
            <h2>Deine Zertifikate</h2>
            <p>
                Hier findest du alle Zertifikate, die du im Alolo FrÃ¼chte-Katalog erhalten hast.
                Jede Urkunde bestÃ¤tigt deinen Lernfortschritt auf einfache und freundliche Art.
            </p>
        </div>
        <div class="controls-row" style="margin-bottom:0.8rem;">
            <button id="generateCertBtn" class="control-button" type="button">
                ğŸ“œ Zertifikat erzeugen
            </button>
            <div style="font-size:0.8rem; opacity:0.9;">
                Tipp: Je mehr Karten du als â€Gelerntâ€œ markierst, desto aussagekrÃ¤ftiger wird dein Zertifikat.
            </div>
        </div>
        <div id="certList" class="cert-list">
            <!-- Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª ØªÙˆÙ„Ù‘ÙØ¯ Ù‡Ù†Ø§ -->
        </div>
    </section>
</main>

<footer>
    Â© 2025 Â· Alolo Visual Language Lab Â· ØªØµÙ…ÙŠÙ… Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ© (Deutsch / Ø¹Ø±Ø¨ÙŠ) Ù„ØªØ¹Ù„Ù‘Ù… Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø¨ØµØ±ÙŠ Ù…ÙˆØ­Ù‘Ø¯.
</footer>

<!-- Modal Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ± -->
<div class="image-modal" aria-hidden="true">
    <div class="image-modal-backdrop"></div>
    <div class="image-modal-dialog" role="dialog" aria-modal="true">
        <button class="image-modal-close" type="button" aria-label="Bild schlieÃŸen">Ã—</button>
        <div class="image-modal-frame">
            <img src="" alt="">
        </div>
        <p class="image-modal-caption"></p>
    </div>
</div>

<script>
    // ==============================
    // PWA: ØªØ³Ø¬ÙŠÙ„ Service Worker Ø¨Ø³ÙŠØ·
    // ==============================
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js').catch(() => {});
    }

    const THEME_KEY = 'alolo-fruits-theme';
    const LEARNED_KEY = 'alolo-fruits-learned';
    const CERT_KEY = 'alolo-fruits-certificates';

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¶Ø¹ÙŠÙ†
    const themeToggleBtn = document.querySelector('.theme-toggle');
    const themeToggleLabel = themeToggleBtn.querySelector('.label');
    const themeToggleIcon = themeToggleBtn.querySelector('.icon');

    function applyTheme(theme) {
        document.body.setAttribute('data-theme', theme);

        if (theme === 'light') {
            themeToggleLabel.textContent = 'Tagmodus';
            themeToggleIcon.textContent = 'â˜€ï¸';
        } else {
            themeToggleLabel.textContent = 'Nachtmodus';
            themeToggleIcon.textContent = 'ğŸŒ™';
        }
    }

    const savedTheme = localStorage.getItem(THEME_KEY);
    if (savedTheme === 'light' || savedTheme === 'dark') {
        applyTheme(savedTheme);
    } else {
        applyTheme('dark');
    }

    themeToggleBtn.addEventListener('click', () => {
        const currentTheme = document.body.getAttribute('data-theme') || 'dark';
        const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
        applyTheme(nextTheme);
        localStorage.setItem(THEME_KEY, nextTheme);
    });

    // ==============================
    // Modal Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±
    // ==============================
    const imageModal = document.querySelector('.image-modal');
    const imageModalImg = imageModal.querySelector('.image-modal-frame img');
    const imageModalCaption = imageModal.querySelector('.image-modal-caption');
    const imageModalCloseBtn = imageModal.querySelector('.image-modal-close');
    const imageModalBackdrop = imageModal.querySelector('.image-modal-backdrop');

    function openImageModal(src, alt, captionText) {
        imageModalImg.src = src;
        imageModalImg.alt = alt || '';
        imageModalCaption.textContent = captionText || '';
        imageModal.classList.add('open');
        imageModal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
    }

    function closeImageModal() {
        imageModal.classList.remove('open');
        imageModal.setAttribute('aria-hidden', 'true');
        imageModalImg.src = '';
        imageModalImg.alt = '';
        imageModalCaption.textContent = '';
        document.body.style.overflow = '';
    }

    imageModalCloseBtn.addEventListener('click', closeImageModal);
    imageModalBackdrop.addEventListener('click', closeImageModal);
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && imageModal.classList.contains('open')) {
            closeImageModal();
        }
    });

    // ==============================
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø·Ù‚ (Speech Synthesis)
    // ==============================
    const supportsSpeech = 'speechSynthesis' in window && 'SpeechSynthesisUtterance' in window;

    function speakGerman(text) {
        if (!supportsSpeech) {
            alert('Die Sprachausgabe wird von diesem Browser leider nicht unterstÃ¼tzt.');
            return;
        }
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'de-DE';
        utterance.rate = 0.95;
        utterance.pitch = 1;
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utterance);
    }

    // ==============================
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙˆØ§ÙƒÙ‡
    // ==============================
    const fruits = [
        {
            id: 'apfel',
            article: 'der',
            genusHint: 'maskulines Nomen (der)',
            deName: 'Apfel',
            arName: 'ØªÙØ§Ø­Ø©',
            level: 'Niveau A1 Â· Obst',
            levelCode: 'A1',
            category: 'Kernobst',
            tagGroup: 'Kernobst',
            img: 'images/apfel.jpg',
            alt: 'Apfel â€” ØªÙØ§Ø­Ø©',
            codePath: 'images/apfel.jpg',
            exampleDe: 'Ich esse jeden Morgen einen Apfel.',
            exampleAr: 'Ø¢ÙƒÙ„ ØªÙØ§Ø­Ø© ÙƒÙ„ ØµØ¨Ø§Ø­.'
        },
        {
            id: 'banane',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Banane',
            arName: 'Ù…ÙˆØ²Ø©',
            level: 'Niveau A1 Â· Obst',
            levelCode: 'A1',
            category: 'Obst',
            tagGroup: 'Obst',
            img: 'images/banane.jpg',
            alt: 'Banane â€” Ù…ÙˆØ²Ø©',
            codePath: 'images/banane.jpg',
            exampleDe: 'Die Banane ist sehr sÃ¼ÃŸ.',
            exampleAr: 'Ø§Ù„Ù…ÙˆØ²Ø© Ø­Ù„ÙˆØ© Ø¬Ø¯Ø§Ù‹.'
        },
        {
            id: 'orange',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Orange',
            arName: 'Ø¨Ø±ØªÙ‚Ø§Ù„Ø©',
            level: 'Zitrusfrucht',
            levelCode: 'A1',
            category: 'Zitrusfrucht',
            tagGroup: 'Zitrusfrucht',
            img: 'images/orange.jpg',
            alt: 'Orange â€” Ø¨Ø±ØªÙ‚Ø§Ù„Ø©',
            codePath: 'images/orange.jpg',
            exampleDe: 'Zum FrÃ¼hstÃ¼ck trinke ich Orangensaft.',
            exampleAr: 'Ø£Ø´Ø±Ø¨ Ø¹ØµÙŠØ± Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„ÙØ·ÙˆØ±.'
        },
        {
            id: 'traube',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Traube',
            arName: 'Ø¹Ù†Ø¨',
            level: 'Niveau A1 Â· Obst',
            levelCode: 'A1',
            category: 'Beere',
            tagGroup: 'Beere',
            img: 'images/traube.jpg',
            alt: 'Traube â€” Ø¹Ù†Ø¨',
            codePath: 'images/traube.jpg',
            exampleDe: 'Die Trauben sind frisch und lecker.',
            exampleAr: 'Ø§Ù„Ø¹Ù†Ø¨ Ø·Ø§Ø²Ø¬ ÙˆÙ„Ø°ÙŠØ°.'
        },
        {
            id: 'erdbeere',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Erdbeere',
            arName: 'ÙØ±Ø§ÙˆÙ„Ø©',
            level: 'Beere',
            levelCode: 'A1',
            category: 'Beere',
            tagGroup: 'Beere',
            img: 'images/erdbeere.jpg',
            alt: 'Erdbeere â€” ÙØ±Ø§ÙˆÙ„Ø©',
            codePath: 'images/erdbeere.jpg',
            exampleDe: 'Die Kinder mÃ¶gen Erdbeeren mit Sahne.',
            exampleAr: 'Ø§Ù„Ø£Ø·ÙØ§Ù„ ÙŠØ­Ø¨ÙˆÙ† Ø§Ù„ÙØ±Ø§ÙˆÙ„Ø© Ù…Ø¹ Ø§Ù„ÙƒØ±ÙŠÙ…Ø©.'
        },
        {
            id: 'kirsche',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Kirsche',
            arName: 'ÙƒØ±Ø²',
            level: 'Beere',
            levelCode: 'A2',
            category: 'Beere',
            tagGroup: 'Beere',
            img: 'images/kirsche.jpg',
            alt: 'Kirsche â€” ÙƒØ±Ø²',
            codePath: 'images/kirsche.jpg',
            exampleDe: 'Der Kuchen mit Kirschen schmeckt gut.',
            exampleAr: 'Ø§Ù„ÙƒØ¹ÙƒØ© Ø¨Ø§Ù„ÙƒØ±Ø² Ø·Ø¹Ù…Ù‡Ø§ Ù„Ø°ÙŠØ°.'
        },
        {
            id: 'ananas',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Ananas',
            arName: 'Ø£Ù†Ø§Ù†Ø§Ø³',
            level: 'Exotisches Obst',
            levelCode: 'A2',
            category: 'Exotisch',
            tagGroup: 'Exotisch',
            img: 'images/ananas.jpg',
            alt: 'Ananas â€” Ø£Ù†Ø§Ù†Ø§Ø³',
            codePath: 'images/ananas.jpg',
            exampleDe: 'Die Ananas ist sehr saftig.',
            exampleAr: 'Ø§Ù„Ø£Ù†Ø§Ù†Ø§Ø³ Ø¹ØµÙŠØ±ÙŠ Ø¬Ø¯Ø§Ù‹.'
        },
        {
            id: 'mango',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Mango',
            arName: 'Ù…Ø§Ù†Ø¬Ø§',
            level: 'Exotisches Obst',
            levelCode: 'A2',
            category: 'Exotisch',
            tagGroup: 'Exotisch',
            img: 'images/mango.jpg',
            alt: 'Mango â€” Ù…Ø§Ù†Ø¬Ø§',
            codePath: 'images/mango.jpg',
            exampleDe: 'Mango ist meine Lieblingsfrucht.',
            exampleAr: 'Ø§Ù„Ù…Ø§Ù†Ø¬Ø§ Ù‡ÙŠ ÙØ§ÙƒÙ‡ØªÙŠ Ø§Ù„Ù…ÙØ¶Ù‘Ù„Ø©.'
        },
        {
            id: 'birne',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Birne',
            arName: 'Ø¥Ø¬Ù‘Ø§ØµØ©',
            level: 'Niveau A1 Â· Obst',
            levelCode: 'A1',
            category: 'Kernobst',
            tagGroup: 'Kernobst',
            img: 'images/birne.jpg',
            alt: 'Birne â€” Ø¥Ø¬Ù‘Ø§ØµØ©',
            codePath: 'images/birne.jpg',
            exampleDe: 'Ich kaufe Birnen auf dem Markt.',
            exampleAr: 'Ø£Ø´ØªØ±ÙŠ Ø§Ù„Ø¥Ø¬Ø§Øµ Ù…Ù† Ø§Ù„Ø³ÙˆÙ‚.'
        },
        {
            id: 'melone',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Melone',
            arName: 'Ø¨Ø·ÙŠØ® / Ø´Ù…Ù‘Ø§Ù…',
            level: 'Sommerobst',
            levelCode: 'A1',
            category: 'Obst',
            tagGroup: 'Obst',
            img: 'images/melone.jpg',
            alt: 'Melone â€” Ø¨Ø·ÙŠØ® / Ø´Ù…Ù‘Ø§Ù…',
            codePath: 'images/melone.jpg',
            exampleDe: 'Im Sommer essen wir gern Melone.',
            exampleAr: 'ÙÙŠ Ø§Ù„ØµÙŠÙ Ù†Ø­Ø¨ Ø£ÙƒÙ„ Ø§Ù„Ø¨Ø·ÙŠØ®.'
        },
        {
            id: 'zitrone',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Zitrone',
            arName: 'Ù„ÙŠÙ…ÙˆÙ†Ø©',
            level: 'Zitrusfrucht',
            levelCode: 'A2',
            category: 'Zitrusfrucht',
            tagGroup: 'Zitrusfrucht',
            img: 'images/zitrone.jpg',
            alt: 'Zitrone â€” Ù„ÙŠÙ…ÙˆÙ†Ø©',
            codePath: 'images/zitrone.jpg',
            exampleDe: 'Der Tee mit Zitrone ist warm.',
            exampleAr: 'Ø§Ù„Ø´Ø§ÙŠ Ø¨Ø§Ù„Ù„ÙŠÙ…ÙˆÙ† Ø¯Ø§ÙØ¦.'
        },
        {
            id: 'pflaume',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Pflaume',
            arName: 'Ø¨Ø±Ù‚ÙˆÙ‚',
            level: 'Niveau A2 Â· Obst',
            levelCode: 'A2',
            category: 'Obst',
            tagGroup: 'Obst',
            img: 'images/pflaume.jpg',
            alt: 'Pflaume â€” Ø¨Ø±Ù‚ÙˆÙ‚',
            codePath: 'images/pflaume.jpg',
            exampleDe: 'Aus Pflaumen macht man Marmelade.',
            exampleAr: 'ÙŠÙØµÙ†Ø¹ Ù…Ù† Ø§Ù„Ø¨Ø±Ù‚ÙˆÙ‚ Ù…Ø±Ø¨Ù‘Ù‰.'
        },
        {
            id: 'kiwi',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Kiwi',
            arName: 'ÙƒÙŠÙˆÙŠ',
            level: 'Exotisches Obst',
            levelCode: 'A2',
            category: 'Exotisch',
            tagGroup: 'Exotisch',
            img: 'images/kiwi.jpg',
            alt: 'Kiwi â€” ÙƒÙŠÙˆÙŠ',
            codePath: 'images/kiwi.jpg',
            exampleDe: 'Die Kiwi ist klein, aber gesund.',
            exampleAr: 'Ø§Ù„ÙƒÙŠÙˆÙŠ ØµØºÙŠØ±Ø© Ù„ÙƒÙ†Ù‡Ø§ ØµØ­ÙŠØ©.'
        },
        {
            id: 'grapefruit',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Grapefruit',
            arName: 'Ø¬Ø±ÙŠØ¨ ÙØ±ÙˆØª',
            level: 'Zitrusfrucht',
            levelCode: 'A2',
            category: 'Zitrusfrucht',
            tagGroup: 'Zitrusfrucht',
            img: 'images/grapefruit.jpg',
            alt: 'Grapefruit â€” Ø¬Ø±ÙŠØ¨ ÙØ±ÙˆØª',
            codePath: 'images/grapefruit.jpg',
            exampleDe: 'Grapefruit schmeckt ein bisschen bitter.',
            exampleAr: 'Ø§Ù„Ø¬Ø±ÙŠØ¨ ÙØ±ÙˆØª Ø·Ø¹Ù…Ù‡ Ù…Ø§Ø¦Ù„ Ù„Ù„Ù…Ø±Ø§Ø±Ø©.'
        },
        {
            id: 'mandarine',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Mandarine',
            arName: 'Ù…Ø§Ù†Ø¯Ø±ÙŠÙ† / ÙŠÙˆØ³ÙÙŠ',
            level: 'Zitrusfrucht',
            levelCode: 'A1',
            category: 'Zitrusfrucht',
            tagGroup: 'Zitrusfrucht',
            img: 'images/mandarine.jpg',
            alt: 'Mandarine â€” Ù…Ø§Ù†Ø¯Ø±ÙŠÙ† / ÙŠÙˆØ³ÙÙŠ',
            codePath: 'images/mandarine.jpg',
            exampleDe: 'Im Winter essen viele Leute Mandarinen.',
            exampleAr: 'ÙÙŠ Ø§Ù„Ø´ØªØ§Ø¡ ÙŠØ£ÙƒÙ„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù†Ø§Ø³ Ø§Ù„ÙŠÙˆØ³ÙÙŠ.'
        },
        {
            id: 'kokosnuss',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Kokosnuss',
            arName: 'Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯',
            level: 'Exotisches Obst',
            levelCode: 'A2',
            category: 'Exotisch',
            tagGroup: 'Exotisch',
            img: 'images/kokosnuss.jpg',
            alt: 'Kokosnuss â€” Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯',
            codePath: 'images/kokosnuss.jpg',
            exampleDe: 'Aus der Kokosnuss trinkt man Kokoswasser.',
            exampleAr: 'Ù…Ù† Ø«Ù…Ø±Ø© Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯ Ù†Ø´Ø±Ø¨ Ù…Ø§Ø¡ Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯.'
        },
        {
            id: 'dattel',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Dattel',
            arName: 'ØªÙ…Ø±Ø©',
            level: 'Niveau A1 Â· Obst',
            levelCode: 'A1',
            category: 'Exotisch',
            tagGroup: 'Exotisch',
            img: 'images/dattel.jpg',
            alt: 'Dattel â€” ØªÙ…Ø±Ø©',
            codePath: 'images/dattel.jpg',
            exampleDe: 'Im Ramadan essen viele Menschen Datteln.',
            exampleAr: 'ÙÙŠ Ø±Ù…Ø¶Ø§Ù† ÙŠØ£ÙƒÙ„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù†Ø§Ø³ Ø§Ù„ØªÙ…Ø±.'
        },
        {
            id: 'feige',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Feige',
            arName: 'ØªÙŠÙ†',
            level: 'Niveau A2 Â· Obst',
            levelCode: 'A2',
            category: 'Exotisch',
            tagGroup: 'Exotisch',
            img: 'images/feige.jpg',
            alt: 'Feige â€” ØªÙŠÙ†',
            codePath: 'images/feige.jpg',
            exampleDe: 'Die Feige wÃ¤chst in warmen LÃ¤ndern.',
            exampleAr: 'Ø§Ù„ØªÙŠÙ† ÙŠÙ†Ù…Ùˆ ÙÙŠ Ø§Ù„Ø¨Ù„Ø¯Ø§Ù† Ø§Ù„Ø¯Ø§ÙØ¦Ø©.'
        },
        {
            id: 'himbeere',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Himbeere',
            arName: 'ØªÙˆØª Ø£Ø­Ù…Ø±',
            level: 'Beere',
            levelCode: 'A2',
            category: 'Beere',
            tagGroup: 'Beere',
            img: 'images/himbeere.jpg',
            alt: 'Himbeere â€” ØªÙˆØª Ø£Ø­Ù…Ø±',
            codePath: 'images/himbeere.jpg',
            exampleDe: 'Himbeeren sind sehr weich.',
            exampleAr: 'Ø§Ù„ØªÙˆØª Ø§Ù„Ø£Ø­Ù…Ø± Ø·Ø±ÙŠ Ø¬Ø¯Ø§Ù‹.'
        },
        {
            id: 'brombeere',
            article: 'die',
            genusHint: 'feminines Nomen (die)',
            deName: 'Brombeere',
            arName: 'ØªÙˆØª Ø£Ø³ÙˆØ¯',
            level: 'Beere',
            levelCode: 'A2',
            category: 'Beere',
            tagGroup: 'Beere',
            img: 'images/brombeere.jpg',
            alt: 'Brombeere â€” ØªÙˆØª Ø£Ø³ÙˆØ¯',
            codePath: 'images/brombeere.jpg',
            exampleDe: 'Die Brombeeren wachsen im Wald.',
            exampleAr: 'Ø§Ù„ØªÙˆØª Ø§Ù„Ø£Ø³ÙˆØ¯ ÙŠÙ†Ù…Ùˆ ÙÙŠ Ø§Ù„ØºØ§Ø¨Ø©.'
        }
    ];

    const totalFruits = fruits.length;

    // ==============================
    // Ø¹Ù†Ø§ØµØ± Ø¹Ø§Ù…Ø© Ùˆ state
    // ==============================
    const gallery = document.querySelector('.gallery');
    const searchInput = document.getElementById('searchInput');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const progressText = document.getElementById('progressText');
    const progressBar = document.getElementById('progressBar');
    const printBtn = document.getElementById('printBtn');
    const quizInfo = document.getElementById('quizInfo');
    const xpValueEl = document.getElementById('xpValue');
    const certIconsEl = document.getElementById('certIcons');
    const navTabs = document.querySelectorAll('.nav-tab');
    const pages = document.querySelectorAll('.page');

    const lightningQuizBtn = document.getElementById('lightningQuizBtn');
    const quizSectionPage = document.getElementById('page-quiz');
    const quizSection = document.querySelector('.quiz-section');
    const quizCloseBtn = document.getElementById('quizCloseBtn');
    const quizList = document.getElementById('quizList');
    const quizMeta = document.getElementById('quizMeta');

    const certListEl = document.getElementById('certList');
    const generateCertBtn = document.getElementById('generateCertBtn');

    let searchQuery = '';
    let activeFilter = 'all';

    // learnedSet Ù…Ù† localStorage
    let learnedSet = new Set();
    {
        const storedLearned = localStorage.getItem(LEARNED_KEY);
        if (storedLearned) {
            try {
                const arr = JSON.parse(storedLearned);
                if (Array.isArray(arr)) {
                    learnedSet = new Set(arr);
                }
            } catch (_) {}
        }
    }

    // Ø´Ù‡Ø§Ø¯Ø§Øª Ù…Ù† localStorage
    let certificates = [];
    {
        const storedCerts = localStorage.getItem(CERT_KEY);
        if (storedCerts) {
            try {
                const arr = JSON.parse(storedCerts);
                if (Array.isArray(arr)) {
                    certificates = arr;
                }
            } catch (_) {}
        }
    }

    // Ø¥Ø­ØµØ§Ø¡Ø§Øª Schnell-Quiz
    let quizStats = {
        total: 0,
        correct: 0
    };

    function saveLearned() {
        localStorage.setItem(LEARNED_KEY, JSON.stringify(Array.from(learnedSet)));
    }

    function saveCertificates() {
        localStorage.setItem(CERT_KEY, JSON.stringify(certificates));
    }

    function calculateXP() {
        // XP Ø¨Ø³ÙŠØ·: ÙƒÙ„ ÙƒÙ„Ù…Ø© Ù…ØªØ¹Ù„Ù…ÙØ© = 10 Ù†Ù‚Ø§Ø·
        const xp = learnedSet.size * 10;
        xpValueEl.textContent = xp;
        return xp;
    }

    function updateProgressUI() {
        const learnedCount = learnedSet.size;
        progressText.textContent = `${learnedCount} / ${totalFruits}`;
        const ratio = totalFruits > 0 ? (learnedCount / totalFruits) * 100 : 0;
        progressBar.style.width = `${ratio}%`;
        calculateXP();
    }

    function updateQuizInfo() {
        if (quizStats.total === 0) {
            quizInfo.textContent = '';
            quizMeta.textContent = '';
            return;
        }
        quizInfo.textContent = `Schnell-Quiz (A1): ${quizStats.correct} / ${quizStats.total} richtig`;
    }

    function normalizeText(str) {
        return (str || '').toString().trim().toLowerCase();
    }

    function fruitMatchesSearch(fruit, query) {
        if (!query) return true;
        const q = normalizeText(query);
        return (
            normalizeText(fruit.deName).includes(q) ||
            normalizeText(fruit.arName).includes(q) ||
            normalizeText(fruit.article + ' ' + fruit.deName).includes(q) ||
            normalizeText(fruit.exampleDe).includes(q) ||
            normalizeText(fruit.exampleAr).includes(q)
        );
    }

    function fruitMatchesFilter(fruit, filter) {
        if (filter === 'all') return true;
        if (filter === 'A1' || filter === 'A2') {
            return fruit.levelCode === filter;
        }
        if (filter === 'Zitrusfrucht' || filter === 'Beere' || filter === 'Exotisch') {
            return fruit.category === filter;
        }
        return true;
    }

    // ==============================
    // ØªÙ†Ù‚Ù‘Ù„ Ø§Ù„ØµÙØ­Ø§Øª (Ù…Ø«Ù„ ØªØ¨ÙˆÙŠØ¨Ø§Øª Duolingo)
    // ==============================
    function setActivePage(pageId) {
        pages.forEach(p => {
            if (p.id === pageId) {
                p.classList.add('page-active');
            } else {
                p.classList.remove('page-active');
            }
        });
        navTabs.forEach(btn => {
            if (btn.getAttribute('data-target') === pageId) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
    }

    navTabs.forEach(btn => {
        btn.addEventListener('click', () => {
            const target = btn.getAttribute('data-target');
            setActivePage(target);
        });
    });

    // ==============================
    // Ø±Ø³Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (Ø§Ù„Ùƒatalog)
    // ==============================
    function renderFruits() {
        gallery.innerHTML = '';

        const filtered = fruits.filter(fruit =>
            fruitMatchesSearch(fruit, searchQuery) &&
            fruitMatchesFilter(fruit, activeFilter)
        );

        filtered.forEach(fruit => {
            const card = document.createElement('article');
            card.className = 'card';
            if (learnedSet.has(fruit.id)) {
                card.classList.add('card-learned');
            }

            const speakText = `${fruit.article} ${fruit.deName}`;

            card.innerHTML = `
                <div class="card-inner">
                    <div class="card-face card-front">
                        <div class="image-wrapper">
                            <img src="${fruit.img}" alt="${fruit.alt}" loading="lazy">
                        </div>
                        <div class="card-body">
                            <div class="de-line">
                                <div class="de-main">
                                    <span class="article" title="${fruit.genusHint}">
                                        ${fruit.article}
                                    </span>
                                    <span class="de-name">${fruit.deName}</span>
                                    <button class="speak-btn" type="button" aria-label="Aussprache anhÃ¶ren">
                                        ğŸ”Š
                                    </button>
                                </div>
                                ${fruit.level
                                    ? `<span class="level-pill">${fruit.level}</span>`
                                    : ''
                                }
                            </div>
                            <div class="ar-name" lang="ar" dir="rtl">${fruit.arName}</div>
                            <div class="code-path">${fruit.codePath}</div>
                            <div class="card-footer-row">
                                <button class="learn-toggle" type="button">
                                    <span class="learn-icon">${learnedSet.has(fruit.id) ? 'â˜…' : 'â˜†'}</span>
                                    <span class="learn-label">
                                        ${learnedSet.has(fruit.id) ? 'Gelernt' : 'Als gelernt markieren'}
                                    </span>
                                </button>
                                <button class="flip-toggle" type="button">
                                    â†º Beispiel
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-face card-back">
                        <div class="card-back-content">
                            <div class="example-label">Beispielsatz</div>
                            <div class="example-de">${fruit.exampleDe}</div>
                            <div class="example-ar" lang="ar" dir="rtl">${fruit.exampleAr}</div>
                        </div>
                    </div>
                </div>
            `;

            const imgEl = card.querySelector('.image-wrapper img');
            imgEl.addEventListener('click', () => {
                const caption = `${fruit.article} ${fruit.deName} â€” ${fruit.arName}`;
                openImageModal(fruit.img, fruit.alt, caption);
            });

            // Ø²Ø± Ù‚Ù„Ø¨ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
            const flipBtn = card.querySelector('.flip-toggle');
            flipBtn.addEventListener('click', () => {
                card.classList.toggle('flipped');
            });

            // Ø²Ø± Ø§Ù„Ù†Ø·Ù‚
            const speakBtn = card.querySelector('.speak-btn');
            if (!supportsSpeech) {
                speakBtn.disabled = true;
                speakBtn.title = 'Sprachausgabe nicht unterstÃ¼tzt';
            } else {
                speakBtn.addEventListener('click', () => {
                    speakGerman(speakText);
                });
                speakBtn.title = 'Aussprache anhÃ¶ren';
            }

            // Ø²Ø±/ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¹Ù„Ù‘Ù…
            const learnToggle = card.querySelector('.learn-toggle');
            const learnIcon = learnToggle.querySelector('.learn-icon');
            const learnLabel = learnToggle.querySelector('.learn-label');

            learnToggle.addEventListener('click', () => {
                if (learnedSet.has(fruit.id)) {
                    learnedSet.delete(fruit.id);
                    card.classList.remove('card-learned');
                    learnIcon.textContent = 'â˜†';
                    learnLabel.textContent = 'Als gelernt markieren';
                } else {
                    learnedSet.add(fruit.id);
                    card.classList.add('card-learned');
                    learnIcon.textContent = 'â˜…';
                    learnLabel.textContent = 'Gelernt';
                }
                saveLearned();
                updateProgressUI();
            });

            gallery.appendChild(card);
        });

        updateProgressUI();
    }

    // ==============================
    // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„Ø§ØªØ± ÙˆØ§Ù„Ø·Ø¨Ø§Ø¹Ø©
    // ==============================
    searchInput.addEventListener('input', (e) => {
        searchQuery = e.target.value;
        renderFruits();
    });

    filterButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            filterButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            activeFilter = btn.getAttribute('data-filter') || 'all';
            renderFruits();
        });
    });

    printBtn.addEventListener('click', () => {
        window.print();
    });

    // ==============================
    // Schnell-Quiz (A1) â€“ Flashcards
    // ==============================
    function shuffleArray(arr) {
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }

    function startLightningQuiz() {
        const a1Fruits = fruits.filter(f => f.levelCode === 'A1');
        const shuffled = shuffleArray(a1Fruits);
        const subset = shuffled.slice(0, Math.min(7, shuffled.length)); // Ø­ØªÙ‰ 7 ÙƒØ±ÙˆØª

        quizList.innerHTML = '';
        quizStats = { total: 0, correct: 0 };
        updateQuizInfo();

        quizMeta.textContent = `Fragen in dieser Runde: ${subset.length} Â· Niveau A1`;

        subset.forEach(fruit => {
            const card = document.createElement('article');
            card.className = 'quiz-card';

            card.innerHTML = `
                <div class="quiz-card-img">
                    <img src="${fruit.img}" alt="${fruit.alt}">
                </div>
                <div class="quiz-card-body">
                    <div class="quiz-ar" lang="ar" dir="rtl">${fruit.arName}</div>
                    <div class="quiz-de">${fruit.article} ${fruit.deName}</div>
                    <div class="quiz-status"></div>
                    <div class="quiz-actions">
                        <button class="control-button small show-solution" type="button">
                            LÃ¶sung zeigen
                        </button>
                        <button class="control-button small know-btn" type="button" disabled>
                            âœ… Ich wusste es
                        </button>
                        <button class="control-button small dontknow-btn" type="button" disabled>
                            âŒ Ich wusste es nicht
                        </button>
                    </div>
                </div>
            `;

            const deEl = card.querySelector('.quiz-de');
            const showBtn = card.querySelector('.show-solution');
            const knowBtn = card.querySelector('.know-btn');
            const dontBtn = card.querySelector('.dontknow-btn');
            const statusEl = card.querySelector('.quiz-status');

            // Ù†Ø®ÙÙŠ Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ Ø­ØªÙ‰ ÙŠØ¶ØºØ· Ø¹Ù„Ù‰ LÃ¶sung zeigen
            deEl.style.display = 'none';

            showBtn.addEventListener('click', () => {
                deEl.style.display = 'block';
                knowBtn.disabled = false;
                dontBtn.disabled = false;
                statusEl.textContent = '';
            });

            function lockCard() {
                showBtn.disabled = true;
                knowBtn.disabled = true;
                dontBtn.disabled = true;
            }

            knowBtn.addEventListener('click', () => {
                quizStats.total += 1;
                quizStats.correct += 1;
                card.classList.add('known');
                card.classList.remove('unknown');
                statusEl.textContent = 'âœ… Stark gemacht! Du hast es gewusst.';
                lockCard();
                updateQuizInfo();
            });

            dontBtn.addEventListener('click', () => {
                quizStats.total += 1;
                card.classList.add('unknown');
                card.classList.remove('known');
                statusEl.textContent = 'âŒ Kein Problem â€“ diese Karte kannst du spÃ¤ter noch einmal Ã¼ben.';
                lockCard();
                updateQuizInfo();
            });

            quizList.appendChild(card);
        });

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„ÙƒÙˆÙŠØ²
        setActivePage('page-quiz');
    }

    lightningQuizBtn.addEventListener('click', () => {
        startLightningQuiz();
    });

    quizCloseBtn.addEventListener('click', () => {
        setActivePage('page-learn');
    });

    // ==============================
    // Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª (Zertifikate)
    // ==============================
    function renderCertIcons() {
        certIconsEl.innerHTML = '';
        if (certificates.length === 0) {
            const empty = document.createElement('span');
            empty.textContent = 'â€”';
            empty.style.opacity = '0.7';
            certIconsEl.appendChild(empty);
            return;
        }

        certificates.slice(0, 6).forEach((cert, index) => {
            const icon = document.createElement('div');
            icon.className = 'cert-icon' + (index === certificates.length - 1 ? ' highlight' : '');
            icon.textContent = 'ğŸ“œ';
            certIconsEl.appendChild(icon);
        });

        if (certificates.length > 6) {
            const more = document.createElement('div');
            more.className = 'cert-icon';
            more.textContent = `+${certificates.length - 6}`;
            certIconsEl.appendChild(more);
        }
    }

    function formatDate(dateISO) {
        const d = new Date(dateISO);
        if (isNaN(d)) return dateISO;
        const day = String(d.getDate()).padStart(2, '0');
        const month = String(d.getMonth() + 1).padStart(2, '0');
        const year = d.getFullYear();
        return `${day}.${month}.${year}`;
    }

    function renderCertificates() {
        certListEl.innerHTML = '';

        if (certificates.length === 0) {
            const empty = document.createElement('p');
            empty.textContent = 'Noch keine Zertifikate vorhanden. Lerne einige FrÃ¼chte und erzeuge dann dein erstes Zertifikat.';
            empty.style.fontSize = '0.85rem';
            empty.style.opacity = '0.9';
            certListEl.appendChild(empty);
            return;
        }

        certificates.forEach(cert => {
            const card = document.createElement('article');
            card.className = 'cert-card';

            card.innerHTML = `
                <div class="cert-ribbon">Zertifikat</div>
                <div class="cert-title">Alolo FrÃ¼chte Â· ${cert.title}</div>
                <div class="cert-meta">
                    Datum: ${formatDate(cert.dateISO)} Â· ID: ${cert.id}
                    Â· Gelernt: ${cert.learnedCount} / ${cert.totalFruits} Â· ${cert.xp} XP
                </div>
                <p class="cert-text-de">
                    Dieses Zertifikat bestÃ¤tigt, dass ${cert.name} im Rahmen des
                    <strong>Alolo FrÃ¼chte-Katalogs</strong> erfolgreich Vokabeln zum Thema Obst
                    auf Deutsch und Arabisch gelernt und geÃ¼bt hat.
                </p>
                <p class="cert-text-de">
                    Der Inhaber dieser Urkunde hat aktiv mit Bildern, Aussprache und kurzen BeispielsÃ¤tzen gearbeitet.
                    Diese Bescheinigung wird von unserem Lernprojekt anerkannt und kann gegenÃ¼ber interessierten
                    Personen als Nachweis des persÃ¶nlichen Engagements vorgelegt werden.
                </p>
                <p class="cert-text-ar" dir="rtl" lang="ar">
                    ÙŠØ¤ÙƒÙ‘Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø£Ù†Ù‘ <strong>${cert.nameArabic}</strong> Ù‚Ø¯ Ø£Ù†Ø¬Ø² ØªØ¯Ø±ÙŠØ¨Ø§Ù‹ Ø¨ØµØ±ÙŠØ§Ù‹â€“Ø³Ù…Ø¹ÙŠØ§Ù‹
                    ÙÙŠ Â«ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„ÙÙˆØ§ÙƒÙ‡Â» ÙˆØªØ¹Ù„Ù‘Ù… Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ© Ù…Ø¹ ØªØ±Ø¬Ù…ØªÙ‡Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.
                    ÙŠØªÙ…Ù†Ù‘Ù‰ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ù„Ù‡/Ù„Ù‡Ø§ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯Ø§Ø¦Ù…ØŒ ÙˆÙŠØ¤ÙƒÙ‘Ø¯ Ù„Ù…Ù† ÙŠÙ‡Ù…Ù‘Ù‡ Ø§Ù„Ø£Ù…Ø± Ø£Ù†Ù‘ Ø­Ø§Ù…Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©
                    Ù…Ø¹ØªØ±Ù Ø¨Ù‡ Ù…Ù† Ù‚Ø¨Ù„ ÙØ±ÙŠÙ‚ Ù…ÙˆÙ‚Ø¹ Alolo Ø¶Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù…Ù† Ø§Ù„ØªØ¹Ù„Ù‘Ù….
                </p>
            `;

            certListEl.appendChild(card);
        });

        renderCertIcons();
    }

    function generateCertificateObject() {
        const learnedCount = learnedSet.size;
        const xp = calculateXP();

        // Ø­Ø¯ÙˆØ¯ Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰
        let title = 'FrÃ¼chte Starter';
        if (learnedCount >= 10 && learnedCount < totalFruits) {
            title = 'FrÃ¼chte Basis';
        } else if (learnedCount === totalFruits && totalFruits > 0) {
            title = 'FrÃ¼chte Meister';
        }

        const now = new Date();
        const id = 'FR-' + now.getTime().toString(36).toUpperCase();

        // ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø³Ù… Ù‡Ù†Ø§ ÙƒÙ…Ø§ ØªØ­Ø¨ Ù„Ø§Ø­Ù‚Ø§Ù‹
        const name = 'Herr Alolo';
        const nameArabic = 'Herr Alolo';

        return {
            id,
            dateISO: now.toISOString(),
            title,
            learnedCount,
            totalFruits,
            xp,
            name,
            nameArabic
        };
    }

    generateCertBtn.addEventListener('click', () => {
        const learnedCount = learnedSet.size;

        if (learnedCount < 3) {
            alert('Erzeuge dein Zertifikat, nachdem du mindestens 3 Karten als â€Gelerntâ€œ markiert hast.');
            return;
        }

        const cert = generateCertificateObject();
        certificates.push(cert);
        saveCertificates();
        renderCertificates();
        setActivePage('page-certificates');

        alert('Dein Zertifikat wurde erzeugt und oben unter â€Zertifikateâ€œ gespeichert.');
    });

    // ==============================
    // Ø±Ø³Ù… Ø£ÙˆÙ„ÙŠ
    // ==============================
    renderFruits();
    renderCertificates();
    renderCertIcons();
</script>
</body>
</html>
